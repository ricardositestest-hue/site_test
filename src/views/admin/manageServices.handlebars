<div class="container">
    <h1>Serviços</h1>

    {{#if error}}
        <div class="alert alert-error"><i data-lucide="alert-circle"></i> {{error}}</div>
    {{/if}}
    {{#if success}}
        <div class="alert alert-success"><i data-lucide="check-circle"></i> {{success}}</div>
    {{/if}}

    <h2>Novo Item</h2>
    <div class="card-add">
        <form action="/admin/services" enctype="multipart/form-data" method="POST">
            <div class="form-group">
                <label>Nome do Serviço</label>
                <input type="text" name="nome" placeholder="Ex: Corte de Cabelo" required>
            </div>
            
            <div class="row-inputs">
                <div class="form-group">
                    <label>Duração (min)</label>
                    <input type="number" name="duracao_min" placeholder="30" required>
                </div>
                <div class="form-group">
                    <label>Preço (R$)</label>
                    <input type="number" step="0.01" name="preco" placeholder="50.00" required>
                </div>
            </div>

            <div class="form-group">
                <label>Foto Ilustrativa</label>
                <input type="file" name="img" style="font-size: 12px;">
            </div>
            
            <button type="submit" class="btn-main">Adicionar ao Catálogo</button>
        </form>
    </div>

    <h2>Serviços Ativos</h2>
    
    {{#each servicos}}
    <div class="service-card">
        <span class="service-id">ID #{{this.id}}</span>
        
        <form enctype="multipart/form-data" action="/admin/services/update" method="POST">
            <input type="hidden" name="id" value="{{this.id}}">
            <input type="hidden" name="imgName" value="{{this.img}}">

            <div class="form-group">
                <label>Nome</label>
                <input type="text" name="nome" value="{{this.nome}}" style="background: transparent; border-color: transparent; padding-left: 0; font-weight: 600; font-size: 18px;">
            </div>

            <div class="service-stats">
                <div class="stat-tag">
                    <i data-lucide="clock" style="width:14px; color: var(--primary)"></i>
                    {{this.duracao_min}} min
                </div>
                <div class="stat-tag">
                    <i data-lucide="banknote" style="width:14px; color: var(--success)"></i>
                    R$ {{this.preco}}
                </div>
            </div>

            <div class="actions-area">
                <div class="row-inputs">
                    <div class="form-group" style="margin:0">
                        <label>Alterar Duração</label>
                        <input type="number" name="duracao_min" value="{{this.duracao_min}}">
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Alterar Preço</label>
                        <input type="number" step="0.01" name="preco" value="{{this.preco}}">
                    </div>
                </div>

                <div class="form-group" style="margin:0">
                    <label>Trocar Imagem</label>
                    <input type="file" name="img" style="font-size: 11px;">
                </div>

                <button type="submit" class="btn-update">Atualizar Serviço</button>
                <a href="/admin/services/delete/{{this.id}}&{{this.img}}" 
                   class="btn-delete" 
                   onclick="return confirm('Deseja realmente deletar?')">
                   <i data-lucide="trash-2" style="width:14px; vertical-align:middle"></i> Deletar Permanentemente
                </a>
            </div>
        </form>
    </div>
    {{/each}}
</div>

<script>
    lucide.createIcons();
</script>