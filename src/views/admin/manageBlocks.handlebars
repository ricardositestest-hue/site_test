<div class="container">
    <h1><i data-lucide="calendar-off"></i> Bloqueios</h1>

    <div class="filter-header">
        <form method="GET" action="/admin/blocks">
            <div class="form-row">
                <label>Profissional</label>
                <select name="profissional_id">
                    {{#each profissionais}}
                    <option value="{{this.id}}" {{#ifEquals this.id ../profissional_id}}selected{{/ifEquals}}>{{this.nome}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="form-row">
                <label>Visualizar Data</label>
                <input type="date" name="data" value="{{data}}">
            </div>
            <button type="submit" class="btn-filter">
                <i data-lucide="search" style="width:16px"></i> Filtrar Agenda
            </button>
        </form>
    </div>

    <h2><i data-lucide="calendar-days"></i> Bloquear Dia Inteiro</h2>
    <div class="card">
        <form method="POST" action="/admin/blocks/day">
            <input type="hidden" name="profissional_id" value="{{profissional_id}}">
            <div class="form-row">
                <input type="date" name="data" required>
            </div>
            <div class="form-row">
                <input type="text" name="motivo" placeholder="Motivo (ex: Feriado, Folga)">
            </div>
            <button type="submit"><i data-lucide="plus" style="width:18px"></i> Confirmar Bloqueio</button>
        </form>
    </div>

    <h2><i data-lucide="clock"></i> Bloquear Horário Específico</h2>
    <div class="card">
        <form method="POST" action="/admin/blocks/hour">
            <input type="hidden" name="profissional_id" value="{{profissional_id}}">
            <div class="form-row" style="display: flex; gap: 10px;">
                <input type="date" name="data" required style="flex: 2;">
                <input type="time" name="hora" required style="flex: 1;">
            </div>
            <div class="form-row">
                <input type="text" name="motivo" placeholder="Motivo (ex: Almoço, Médico)">
            </div>
            <button type="submit"><i data-lucide="plus" style="width:18px"></i> Bloquear Horário</button>
        </form>
    </div>

    <h2><i data-lucide="list"></i> Dias Bloqueados</h2>
    <ul>
        {{#each diasBloqueados}}
        <li>
            <div class="block-info">
                <span class="block-date">{{this.data}}</span>
                <span class="block-reason">{{this.motivo}}</span>
            </div>
            <a href="/admin/blocks/delete/day/{{this.id}}" class="btn-delete" onclick="return confirm('Remover bloqueio?')">Remover</a>
        </li>
        {{/each}}
    </ul>

    <h2 style="margin-top: 40px;"><i data-lucide="list-ordered"></i> Horas Bloqueadas</h2>
    <ul>
        {{#each horasBloqueadas}}
        <li>
            <div class="block-info">
                <span class="block-date">{{this.data}} às {{this.hora}}</span>
                <span class="block-reason">{{this.motivo}}</span>
            </div>
            <a href="/admin/blocks/delete/hour/{{this.id}}" class="btn-delete" onclick="return confirm('Remover bloqueio?')">Remover</a>
        </li>
        {{/each}}
    </ul>
</div>

<script>
    lucide.createIcons();
</script>